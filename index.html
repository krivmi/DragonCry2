<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="X-UA-Compatible" content="IE=7">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">

<<<<<<< HEAD
    <!--<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">-->

    <title>Dragon Cry</title>

    <link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body id="bodycko">
    <!--
    <div id="lista">
        <div class="menu">
            <span class="span" style="position: relative; left: 0px;  top:0px; ;">
                <a href="index.html">
                    <img src="img/drak_icon3.png" width="80" height="60" onmouseover=" this.src = './img/drak_icon_hover.png';" onmouseout="this.src = './img/drak_icon3.png';"
                        alt="drak_icon2" />
                </a>
            </span>
            <span class="span" style="position: relative; left: 600px;  bottom:25px; ;">
                <a class="alista" href="oprojektu.html">O projektu</a>
            </span>
            <span class="span" style="position: relative; left: 700px;  bottom:25px; ;">
                <a class="alista" href="draci.html">Draci</a>
            </span>
            <span class="span" style="position: relative; left: 800px;  bottom:25px; ;">
                <a class="alista" href="knizky.html">Knížky</a>
            </span>
=======
    <link rel="stylesheet" href="DragonCryCSS.css" type="text/css"/>
     
    <title>Dragon Cry</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>
        $(document).ready(function(){
  //přidám si skroll pro všechny A
  $("a").on('click', function(event) {

    // Make sure this.hash has a value before overriding default behavior
    if (this.hash !== " ") {
      // Prevent default anchor click behavior ?????
      event.preventDefault();

    //nastavím si hash
      var hash = this.hash;

      // použiji si jquery animate method, aby se mi to krásně srolovalo
      // zadám, jak dlouho by měla doba výjezdu trvat 
      $('html, body').animate({
        scrollTop: $(hash).offset().top
      }, 800, function(){
   
        
        window.location.hash = hash;
      });
    } 
  });
});
        </script>
</head>

<body id="bodycko">
    
    <div id="suprise">
                   Hru ovládejte šipkami!
                        <br>
                    <img src="sipky3.png" width="300" height="173" alt="Šipky"/>
                </div>
       
        <div id="lista">
            <div class="menu">
             <span class="span" style="position: relative; left: 0px;  top:0px; ;">     <a href="index.html"><img src="drak_icon3.png" width="80" height="60" onmouseover=" this.src = 'drak_icon_hover.png';" onmouseout="this.src = 'drak_icon3.png';" alt="drak_icon2"/></a> </span>   
             <span class="span" style="position: relative; left: 600px;  bottom:25px; ;"><a class="alista" href="#oprojektu">O projektu</a> </span>
             <span class="span" style="position: relative; left: 700px;  bottom:25px; ;"><a class="alista" href="#vitejte">O hře</a> </span>
             <span class="span" style="position: relative; left: 800px;  bottom:25px; ;"><a class="alista" href="#ohre">Hra</a> </span>
            </div>
            
          
>>>>>>> master
        </div>
    </div>
    -->
    <div id="logo">
        <!--<img src="img/logo_drak_prvni.png" width="500" height="350" alt="Logo_drak_prvni" />-->
    </div>
    <div>
        <div>
            <h2>Vítejte,</h2>
            <p>
                tyto stránky vznikly v rámci maturitního projektu, kde jsem měl ukázat znalosti v oblasti tvoření webu a hry
                v programovacím jazyku JavaScript, následně také HTML5 a CSS. Doufám, že se Vám stránky budou líbit a že
                si hraní hry užijete stejně, jako mě bavilo hru vytvářet. Hodně štěstí!
            </p>

            <h2>O hře</h2>
            <p>
                Jako hru jsem si zvolil klasickou 2D plošinovku, ve které se budete vyhýbat překážkám, jakmile se frak dotkne
                takové překážky, hra skončí. Zkuste tedy vydržet co nejdéle, čím déle vydžíte, tím větší skore se Vám přičte.
                A nezapomeňte si dávat pozor na zrychlení! Hra se ovládá šipkami na klávesnici.
            </p>
        </div>
<<<<<<< HEAD
    </div>
    <div>
        <canvas class="game-canvas">
        </canvas>
    </div>

    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/main.js"></script>
=======
           
      <div id="obalHry">  
         
            <div id="stredni">
                 
                <p class="nadpisy" id="vitejte">Vítejte,</p> <p class="pismo"> tyto stránky vznikly v rámci maturitního projektu, kde jsem měl ukázat znalosti v oblasti tvoření webu a hry 
                v programovacím jazyku JavaScript, následně také HTML5 a CSS. Doufám, že se Vám stránky budou líbit a že si hraní hry užijete stejně,
                jako mě bavilo hru vytvářet. Hodně štěstí! </p>
                <br>
                
                 <p class="nadpisy" id="ohre">O hře</p>
                 <p class="pismo">   Jako hru jsem si zvolil klasickou 2D plošinovku, ve které se budete vyhýbat překážkám, jakmile se drak dotkne 
                 takové překážky, hra skončí. Zkuste tedy vydržet co nejdéle, čím déle vydžíte, tím větší skore se Vám přičte. A nezapomeňte si dávat pozor na zrychlení!
                 Hra se ovládá šipkami na klávesnici. </p>
                <br>
                
                
                
                
                <div id="platno" onmouseover="document.getElementById('suprise').style.visibility='visible'" onmouseout="document.getElementById('suprise').style.visibility='hidden'">
                    
                    <canvas id="mujDrakAnimace"  >
                </canvas>
                </div>
                <br><br>
                <p class="nadpisy" id="oprojektu">O projektu</p> <p class="pismo"> Projekt jsem začal tvořit už v prosinci roku 2017.
                Což je celkem brzo na vytváření maturitního projektu, oproti mým spolužákům. Už od začátku mne provázely různé komplikace. Na začátku listopadu,
                jsem měl nápad, že udělám hru, kde bude fungovat gravitace, skákání nebo různé kolize. Také jsem musel vymyslet název a
                obsah. Po minutovém rozmýšlení jsem měl hned jasno...Dragon Cry. Popravdě ani nevím, jak jsem na tento název přišel,
                ale to není podstatné, podstatné bylo, jak takovou hru naprogramuji. A tak jsem se dal do práce. 
                Tehdy jsem však nečekal, jak to pro mě bude těžké, protože programovací jazyk JavaScript jsem znal jen okrajově, při 
                tvoření webových stránek ve třetím ročníku, kdy jsme ho přímo nepsali, ale pouze vkládali fo HTML podle tutoriálu. 
                Byla to tedy dost drsná výzva v tomto jazyku napsat hru. Zpočátku se mi velmi nedařilo, nefungovalo mi plátno, měl jsem problémy 
                s vývojovým programem, problémy s načítáním draka, atd. </p>
                
                
                
                
                
                
                
                
                
                
                
                
            </div>
          
          
      <div id ="zapati">    
        <div class="menu"> 
    <p style="position: relative;top:18px">
     Web & design Milan Křivánek 2018</p>
           </div>
      </div>
    </div>


    

    <script>
       
        var Score = 0;
        var end;
        
        var canvas = document.getElementById("mujDrakAnimace");
        
                 canvas.width = 640;
                canvas.height = 480;
                
              
      
       var myObstacle;
        
        // vytvořím si Image() ze kterého bere kousky sprite
        var MujDrak = new Image();
        MujDrak.src = "./Drak_gif3.png";
         //tady si zadefinuji vznik překážek
         
        function drawScore(){
            ctx.font = "16px Arial";
            ctx.fillStyle = "blue";
            ctx.fillText("Skore: " + Score, 400,20);
        }
        function countingScore(){
            if(Drak.render === true){
                score++;
            }
        }
        function gameLoop() {
            // tomuhle příkazu se to furt volá dokola => nekonečná smyčka
           
           
            window.requestAnimationFrame(gameLoop);
            // volám update a render na Draka
            if (Drak.crashWith(myObstacle)) {
                    alert("narazili jste!");
                 } else {
            /* myGameArea.clear();*/
  
            
           myObstacle.update2();
         
            Drak.update();
            Drak.render();
            
           
            }
        }
        // tu definuji funkci sprite, která má v sobě atributy a funkce
        // chová se podobně jako objekt nebo classa v jave 
       
        function sprite(options) {
            // tu si nastavíš jakoby objekt který bude mít vlastnosti tohoto objektu
            var nastaveniDraka = {
           
            frameIndex: 0,
                tickCount: 0,
                ticksPerFrame: 4,
                numberOfFrames : numberOfFrames || 1,
                //konstruktor
            context : options.context,  //volá mi to proměnné z options
            width: options.width,
            height: options.height,
            sx: options.sx,
            sy: options.sy,
            dx: options.dx,
            dy: options.dy,
            image: options.image,
            loop: options.loop || true,
        
        /*var nastavenimyObstacle = {
           
            frameIndex = 0,
                tickCount = 0,
                ticksPerFrame = 4,
                numberOfFrames = options.numberOfFrames || 1,
                //konstruktor
            myObstacle:context = options.context,  //volá mi to proměnné z options
            myObstacle:width = options.width,
            myObstacle:height = options.height,
            myObstacle:sx = options.sx,
            myObstacle:sy = options.sy,
            myObstacle:dx = options.dx,
            myObstacle:dy = options.dy,
            myObstacle:image = options.image,
            myObstacle:loop = options.loop || true,
        },
*/
            // tohle to vypíše na canvas
            render : function() {
                //vykreslí mi toho draka, aby tam ty jeho obrázky vždycky nezůstávaly(vezme a vymizí to)
                nastaveniDraka.context.clearRect(nastaveniDraka.dx,nastaveniDraka.dy, nastaveniDraka.width, nastaveniDraka.height); 
                
                nastaveniDraka.context.drawImage( // vykreslí animaci
                    nastaveniDraka.image,
                    frameIndex * nastaveniDraka.width / numberOfFrames,
                    0,
                    nastaveniDraka.width / numberOfFrames,
                    nastaveniDraka.height,
                    nastaveniDraka.dx,
                    nastaveniDraka.dy,
                    
                    nastaveniDraka.width / numberOfFrames,
                    nastaveniDraka.height,
               
                   );
            },
           crashWith : function(otherobj) {
                 var myleft = that.dx;
                 var myright = that.dx; + (that.width);
                 var mytop = that.dy;
                 var mybottom = that.dy + (that.height);
                 var otherleft = otherobj.x;
                 var otherright = otherobj.x + (otherobj.width);
                 var othertop = otherobj.y;
                 var otherbottom = otherobj.y + (otherobj.height);
                 var crash = true;
                  if ((mybottom < othertop) ||
                            (mytop > otherbottom) ||
                            (myright < otherleft) ||
                     (myleft > otherright)) {
                    crash = false;
                 }
                 return crash;
    }, 
           stopMove : function() {
                 alert("narazili jste!");
             },
            // tu vždy posunu souřadnice o kolik se to má v dalším renderu oříznout
            // když je to na konci, tak se zas hodí na začátek a furt dokola
            update : function() {  
        //ovládání šipkami
                         if (Keys.up) {
                         Drak.dy+=2;
                         
                                }
                else if (Keys.down) {  
                     Drak.dy-=2;
                        }

                if (Keys.left) {
                     Drak.dx+=2;
                        }
                else if (Keys.right) {
                      Drak.dx-=1; //aby dozadu létal pomalu
                        } 
                
                 
                tickCount += 1;
                console.log("loop:" + nastaveniDraka.loop);
                console.log(tickCount);
                if (tickCount > ticksPerFrame) {
                    tickCount = 0;
                    // Pokud je konkrétní obrázek v dosahu
                    console.log("ticketsperframe:" + ticksPerFrame);
                    console.log("frameIndex:" + frameIndex);
                    if (frameIndex < numberOfFrames - 1) {
                        //hodí mi to další obrázek
                        frameIndex += 1;
                    } else if (nastaveniDraka.loop) {
                        frameIndex = 0;
                    }
                }
           
            return nastaveniDraka;
          }    
        };
 }
        // zde zadávám atributy draka
        var Drak = sprite(nastaveniDraka);
            context = canvas.getContext("2d"), //nastudovat jak se pouzivaji ty zavorky ,- () funkce, [] nějaký array, {} objekt, nebo tělo funkce
            width = 1007,
            height = 100,
            // referenční obrázek
            image = MujDrak,
            // co kolik framů se bude měnit obrázek
            numberOfFrames = 10,
            dx = 60,
            dy = 60,
      
      /* var myObstacle = sprite(options.nastavenimyObstacle);
            context; canvas.getContext("2d"), //nastudovat jak se pouzivaji ty zavorky ,- () funkce, [] nějaký array, {} objekt, nebo tělo funkce
            width; 1007,
            height; 100,
            // referenční obrázek
            image; MujDrak,
            // co kolik framů se bude měnit obrázek
            numberOfFrames; 10,
            dx; 60,
            dy; 60,     
            */
      
        // tu máš zas to samé jako nahoře
        // start game se zavolá a
        // 1. oknu se zadá, aby se volalo pokaždé, když může a je vykreslen nový frame v canvas
        function startGame() {
            // podobné gameLoopu, 
            window.requestAnimationFrame(startGame);
          
          
             
            Drak.update();
            Drak.render();
            
          
             
            
        }
        // počká až se načte MujDrak (to je ten obrázek)
        // a pak spustí hru
        MujDrak.addEventListener("load", startGame);
        var Keys = {   //ovládání šipkami, zde zadávám, jak se sprite bude chovat, když mám zmáčklou šipku
        up: false,
        down: false,
        left: false,
        right: false
    };
     window.onkeydown = function(e) {
    var kc = e.keyCode;
    e.preventDefault();

    if      (kc === 39) Keys.left = true;  //pouze jedna zmáčknutá klávesa
    else if (kc === 40) Keys.up = true;    
    else if (kc === 37) Keys.right = true;
    else if (kc === 38) Keys.down = true;
};
   //díky těmto dvěma funkcím mi ten drak umí létat diagonálně a bez trhání(zmáčknutí obou šipek)
window.onkeyup = function(e) {
    var kc = e.keyCode;
    e.preventDefault();

    if      (kc === 39) Keys.left = false;
    else if (kc === 40) Keys.up = false;
    else if (kc === 37) Keys.right = false;
    else if (kc === 38) Keys.down = false;
}; 
  
       
    </script>

>>>>>>> master
</body>